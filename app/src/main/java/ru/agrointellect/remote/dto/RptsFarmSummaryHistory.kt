package ru.agrointellect.remote.dto

import com.github.mikephil.charting.data.ChartData
import com.github.mikephil.charting.data.Entry
import com.github.mikephil.charting.data.LineData
import com.github.mikephil.charting.data.LineDataSet
import com.google.gson.annotations.Expose
import com.google.gson.annotations.SerializedName
import ru.agrointellect.extension.asFloat

/**
 * График: Валовой надой + KPI
 */
@Suppress("SpellCheckingInspection")
class RptsFarmSummaryHistory : Table, ChartBase {

    override val legends: Collection<String>
        get() = listOf("Валовой надой", "KPI кормления")

    override val columns: List<Column>
        get() = listOf(
            Column("№ лактации стада", mapByField("avgLactNum")),
            Column("День доения", mapByField("avgDaysInMilk")),
            Column("День доения 1 лактации", mapByField("avgDaysInMilk1Lact")),
            Column("День доения 2 лактации", mapByField("avgDaysInMilk2Lact")),
            Column("День доения лактации > 2", mapByField("avgDaysInMilkOver2Lact")),
            Column("Сервис-период", mapByField("avgOpenDays")),
            Column("Сервис-период 1 лактации", mapByField("avgOpenDays1Lact")),
            Column("Сервис-период 2 лактации", mapByField("avgOpenDays2Lact")),
            Column("Сервис-период лактации > 2", mapByField("avgOpenDaysOver2Lact")),
            Column("Кол-во дней в сухостое", mapByField("avgDryDays")),
            Column("День стельности коров", mapByField("avgPregnantDaysCows")),
            Column("День стельности нетелей", mapByField("avgPregnantDaysHeifers")),
            Column("Межотельный интервал", mapByField("avgCalvIntDays")),
            Column("Интервал между осеменениями коров", mapByField("avgInsemIntDaysCows")),
            Column("Интервал между осеменениями телок", mapByField("avgInsemIntDaysHeifers")),
            Column("Дней в госпитале", mapByField("avgInHospDays")),
            Column("День доения 1-го осеменения коров", mapByField("avgFirstInsemDimCows")),
            Column("Возраст 1-го осеменения телок", mapByField("avgFirstInsemAgeHeifers")),
            Column("Возраст 1-го отела", mapByField("avgFirstCalvAge1Lact")),
            Column("День доения при пике", mapByField("avgMilkPeakDays")),
            Column("День доения при пике 1 лактации", mapByField("avgMilkPeakDays1Lact")),
            Column("День доения при пике 2 лактации", mapByField("avgMilkPeakDays2Lact")),
            Column("День доения при пике лактации > 2", mapByField("avgMilkPeakDaysOver2Lact")),
            Column("Фуражных коров", mapByField("hrdCowsAll")),
            Column("Дойных коров всего", mapByField("hrdCowsLactAll")),
            Column("% дойных в стаде", mapByField("hrdCowsLactAllPcnt")),
            Column("Дойных коров 1 лактации", mapByField("hrdCowsLact1All")),
            Column("% 1 лактации в дойных", mapByField("hrdCowsLact1Pcnt")),
            Column("Дойных коров 1 лактации 0-30 ДД", mapByField("hrdCowsLact1030")),
            Column("Дойных коров 1 лактации 31-60 ДД", mapByField("hrdCowsLact13160")),
            Column("Дойных коров 1 лактации 61-120 ДД", mapByField("hrdCowsLact161120")),
            Column("Дойных коров 1 лактации > 120 ДД", mapByField("hrdCowsLact1O120")),
            Column("Дойных коров 2 лактации", mapByField("hrdCowsLact2All")),
            Column("% 2 лактации в дойных", mapByField("hrdCowsLact2Pcnt")),
            Column("Дойных коров 2 лактации 0-30 ДД", mapByField("hrdCowsLact2030")),
            Column("Дойных коров 2 лактации 31-60 ДД", mapByField("hrdCowsLact23160")),
            Column("Дойных коров 2 лактации 61-120 ДД", mapByField("hrdCowsLact261120")),
            Column("Дойных коров 2 лактации > 120 ДД", mapByField("hrdCowsLact2O120")),
            Column("Дойных коров лактации > 2", mapByField("hrdCowsLactO2All")),
            Column("% лактации > 2 в дойных", mapByField("hrdCowsLactO2Pcnt")),
            Column("Дойных коров лактации > 2 0-30 ДД", mapByField("hrdCowsLactO2030")),
            Column("Дойных коров лактации > 2 31-60 ДД", mapByField("hrdCowsLactO23160")),
            Column("Дойных коров лактации > 2 61-120 ДД", mapByField("hrdCowsLactO261120")),
            Column("Дойных коров лактации > 2 > 120 ДД", mapByField("hrdCowsLactO2O120")),
            Column("Стельных коров", mapByField("hrdCowsPregAll")),
            Column("% стельных в стаде", mapByField("hrdCowsPregPcnt")),
            Column("Сухостойных коров всего", mapByField("hrdCowsDryAll")),
            Column("% сухостойных в стаде", mapByField("hrdCowsDryPcnt")),
            Column("Сухостойных коров 1 фазы", mapByField("hrdCowsDryF1")),
            Column("Сухостойных коров 2 фазы", mapByField("hrdCowsDryF2")),
            Column("Телок всего", mapByField("hrdHeifersAll")),
            Column("Телок 0-2 мес", mapByField("hrdHeifers02")),
            Column("Телок 2-6 мес", mapByField("hrdHeifers26")),
            Column("Телок 6-12 мес", mapByField("hrdHeifers612")),
            Column("Телок > 12 мес", mapByField("hrdHeifersO12")),
            Column("Нетелей всего", mapByField("hrdPheifersAll")),
            Column("Нетелей 2 фазы", mapByField("hrdPheifersF2")),
            Column("Быков", mapByField("hrdBulls")),
            Column("Осеменений коров", mapByField("evtInsemCows")),
            Column("Осеменений телок", mapByField("evtInsemHeifers")),
            Column("Выявлено стельных коров", mapByField("evtGotPregCows")),
            Column("Выявлено стельных телок", mapByField("evtGotPregHeifers")),
            Column("Запущено коров", mapByField("evtDryCows")),
            Column("Отелов всего", mapByField("evtCalvTotal")),
            Column("Родилось живых телок", mapByField("evtCalvAliveHeifers")),
            Column("Родилось живых быков", mapByField("evtCalvAliveBulls")),
            Column("Родилось мертвых телок", mapByField("evtCalvDeadHeifers")),
            Column("Родилось мертвых быков", mapByField("evtCalvDeadBulls")),
            Column("% мертворожденности", mapByField("evtCalvDeadAllPcnt")),
            Column("% рождаемости телок", mapByField("evtCalvAliveHeifersAllPcnt")),
            Column("Отелов от нетелей", mapByField("evtCalvTotalPheifers")),
            Column("От нетелей родилось живых телок", mapByField("evtCalvAliveHeifersPheifers")),
            Column("От нетелей родилось живых быков", mapByField("evtCalvAliveBullsPheifers")),
            Column("От нетелей родилось мертвых телок", mapByField("evtCalvDeadHeifersPheifers")),
            Column("От нетелей родилось мертвых быков", mapByField("evtCalvDeadBullsPheifers")),
            Column("% мертворожденности от нетелей", mapByField("evtCalvDeadPheifersPcnt")),
            Column("% рождаемости телок от нетелей", mapByField("evtCalvAliveHeifersPheifersPcnt")),
            Column("Отелов от коров", mapByField("evtCalvTotalCows")),
            Column("От коров родилось живых телок", mapByField("evtCalvAliveHeifersCows")),
            Column("От коров родилось живых быков", mapByField("evtCalvAliveBullsCows")),
            Column("От коров родилось мертвых телок", mapByField("evtCalvDeadHeifersCows")),
            Column("От коров родилось мертвых быков", mapByField("evtCalvDeadBullsCows")),
            Column("% мертворожденности от коров", mapByField("evtCalvDeadCowsPcnt")),
            Column("% рождаемости телок от коров", mapByField("evtCalvAliveHeifersCowsPcnt")),
            Column("Абортировало коров", mapByField("evtAbortCows")),
            Column("Абортировало нетелей", mapByField("evtAbortHeifers")),
            Column("Мастит голов за месяц коров", mapByField("evtMastForMonthCows")),
            Column("Хромота голов за месяц коров", mapByField("evtLameForMonthCows")),
            Column("Хромота голов за месяц телок", mapByField("evtLameForMonthHeifers")),
            Column("Задержаний последа лактация 1", mapByField("evtRetPlacLact1")),
            Column("% задержаний последа у нетелей", mapByField("evtRetPlacLact1Pcnt")),
            Column("Задержаний последа лактация > 1", mapByField("evtRetPlacLactO1")),
            Column("% задержаний последа у коров", mapByField("evtRetPlacLactO1Pcnt")),
            Column("Задержаний последа всего", mapByField("evtRetPlacTotal")),
            Column("% задержаний последа", mapByField("evtRetPlacTotalPcnt")),
            Column("Парезов лактация 1", mapByField("evtParesLact1")),
            Column("% парезов у нетелей", mapByField("evtParesLact1Pcnt")),
            Column("Парезов лактация > 1", mapByField("evtParesLactO1")),
            Column("% парезов у коров", mapByField("evtParesLactO1Pcnt")),
            Column("Парезов всего", mapByField("evtParesTotal")),
            Column("% парезов", mapByField("evtParesTotalPcnt")),
            Column("Кетозов лактация 1", mapByField("evtKetosLact1")),
            Column("% кетозов у нетелей", mapByField("evtKetosLact1Pcnt")),
            Column("Кетозов лактация > 1", mapByField("evtKetosLactO1")),
            Column("% кетозов у коров", mapByField("evtKetosLactO1Pcnt")),
            Column("Кетозов всего", mapByField("evtKetosTotal")),
            Column("% кетозов", mapByField("evtKetosTotalPcnt")),
            Column("Метритов", mapByField("evtMetrit")),
            Column("% метритов", mapByField("evtMetritPcnt")),
            Column("Переводов коров", mapByField("evtMoveCows")),
            Column("Переводов телок", mapByField("evtMoveHeifers")),
            Column("Вакцинация коров", mapByField("evtVaccCows")),
            Column("Вакцинация телок", mapByField("evtVaccHeifers")),
            Column("Расчистка копыт коров", mapByField("evtFootrimCows")),
            Column("Расчистка копыт телок", mapByField("evtFootrimHeifers")),
            Column("Продажа коров лактация 1 0-10 ДД", mapByField("evtSoldCowsLact1010")),
            Column("Продажа коров лактация 1 11-30 ДД", mapByField("evtSoldCowsLact11130")),
            Column("Продажа коров лактация 1 31-60 ДД", mapByField("evtSoldCowsLact13160")),
            Column("Продажа коров лактация 1 61-120 ДД", mapByField("evtSoldCowsLact161120")),
            Column("Продажа коров лактация 1 > 120 ДД", mapByField("evtSoldCowsLact1O120")),
            Column("Продажа коров лактация 1 всего", mapByField("evtSoldCowsLact1Total")),
            Column("Продажа коров лактация 2 0-10 ДД", mapByField("evtSoldCowsLact2010")),
            Column("Продажа коров лактация 2 11-30 ДД", mapByField("evtSoldCowsLact21130")),
            Column("Продажа коров лактация 2 31-60 ДД", mapByField("evtSoldCowsLact23160")),
            Column("Продажа коров лактация 2 61-120 ДД", mapByField("evtSoldCowsLact261120")),
            Column("Продажа коров лактация 2 > 120 ДД", mapByField("evtSoldCowsLact2O120")),
            Column("Продажа коров лактация 2 всего", mapByField("evtSoldCowsLact2Total")),
            Column("Продажа коров лактация > 2 0-10 ДД", mapByField("evtSoldCowsLactO2010")),
            Column("Продажа коров лактация > 2 11-30 ДД", mapByField("evtSoldCowsLactO21130")),
            Column("Продажа коров лактация > 2 31-60 ДД", mapByField("evtSoldCowsLactO23160")),
            Column("Продажа коров лактация > 2 61-120 ДД", mapByField("evtSoldCowsLactO261120")),
            Column("Продажа коров лактация > 2 > 120 ДД", mapByField("evtSoldCowsLactO2O120")),
            Column("Продажа коров лактация > 2 всего", mapByField("evtSoldCowsLactO2Total")),
            Column("Продажа коров всего", mapByField("evtSoldCowsTotal")),
            Column("Продажа телок 0-2 мес", mapByField("evtSoldHeifers02")),
            Column("Продажа телок 2-6 мес", mapByField("evtSoldHeifers26")),
            Column("Продажа телок 6-12 мес", mapByField("evtSoldHeifers612")),
            Column("Продажа телок > 12 мес", mapByField("evtSoldHeifersO12")),
            Column("Продажа телок всего", mapByField("evtSoldHeifersTotal")),
            Column("Продажа нетелей", mapByField("evtSoldPheifers")),
            Column("Продажа быков", mapByField("evtSoldBulls")),
            Column("Падеж коров лактация 1 0-10 ДД", mapByField("evtDeadCowsLact1010")),
            Column("Падеж коров лактация 1 11-30 ДД", mapByField("evtDeadCowsLact11130")),
            Column("Падеж коров лактация 1 31-60 ДД", mapByField("evtDeadCowsLact13160")),
            Column("Падеж коров лактация 1 61-120 ДД", mapByField("evtDeadCowsLact161120")),
            Column("Падеж коров лактация 1 > 120 ДД", mapByField("evtDeadCowsLact1O120")),
            Column("Падеж коров лактация 1 всего", mapByField("evtDeadCowsLact1Total")),
            Column("Падеж коров лактация 2 0-10 ДД", mapByField("evtDeadCowsLact2010")),
            Column("Падеж коров лактация 2 11-30 ДД", mapByField("evtDeadCowsLact21130")),
            Column("Падеж коров лактация 2 31-60 ДД", mapByField("evtDeadCowsLact23160")),
            Column("Падеж коров лактация 2 61-120 ДД", mapByField("evtDeadCowsLact261120")),
            Column("Падеж коров лактация 2 > 120 ДД", mapByField("evtDeadCowsLact2O120")),
            Column("Падеж коров лактация 2 всего", mapByField("evtDeadCowsLact2Total")),
            Column("Падеж коров лактация > 2 0-10 ДД", mapByField("evtDeadCowsLactO2010")),
            Column("Падеж коров лактация > 2 11-30 ДД", mapByField("evtDeadCowsLactO21130")),
            Column("Падеж коров лактация > 2 31-60 ДД", mapByField("evtDeadCowsLactO23160")),
            Column("Падеж коров лактация > 2 61-120 ДД", mapByField("evtDeadCowsLactO261120")),
            Column("Падеж коров лактация > 2 > 120 ДД", mapByField("evtDeadCowsLactO2O120")),
            Column("Падеж коров лактация > 2 всего", mapByField("evtDeadCowsLactO2Total")),
            Column("Падеж коров всего", mapByField("evtDeadCowsTotal")),
            Column("Падеж телок 0-2 мес", mapByField("evtDeadHeifers02")),
            Column("Падеж телок 2-6 мес", mapByField("evtDeadHeifers26")),
            Column("Падеж телок 6-12 мес", mapByField("evtDeadHeifers612")),
            Column("Падеж телок > 12 мес", mapByField("evtDeadHeifersO12")),
            Column("Падеж телок всего", mapByField("evtDeadHeifersTotal")),
            Column("Падеж нетелей", mapByField("evtDeadPheifers")),
            Column("Падеж быков", mapByField("evtDeadBulls")),
            Column("Индекс выявления охоты коров", mapByField("brdHeatDetRateCow")),
            Column("Индекс выявления охоты телок", mapByField("brdHeatDetRateHeif")),
            Column("Индекс оплодотворяемости коров", mapByField("brdConcRateCow")),
            Column("Индекс оплодотворяемости телок", mapByField("brdConcRateHeif")),
            Column("Индекс стельности коров", mapByField("brdPregRateCow")),
            Column("Индекс стельности телок", mapByField("brdPregRateHeif")),
            Column("Доз семени на стельную корову", mapByField("brdStrawsPerPregCow")),
            Column("Доз семени на стельную телку", mapByField("brdStrawsPerPregHeif")),
            Column("Валовой надой", mapByField("mlkSumYield")),
            Column("Надой 1 ф/к", mapByField("mlkMilkPerCow")),
            Column("Надой 1 д/к", mapByField("mlkMilkPerLactCow")),
            Column("KPI кормления", mapByField("feedKpi"))
        )

    override val data: ChartData<*>
        get() = LineData(
            listOf(
                LineDataSet(items.map { Entry(parseDate(it.date), it.mlkSumYield.asFloat) }, null),
                LineDataSet(items.map { Entry(parseDate(it.date), it.feedKpi.asFloat) }, null)
            )
        )

    private fun mapByField(name: String): List<Row> {
        val field = RptFarmSummaryHistory::class.java.getField(name)
        return items.map { Row(it.date, field.get(it)?.toString()) }
    }

    @SerializedName("rpt_farm_summary_history")
    @Expose
    lateinit var items: List<RptFarmSummaryHistory>
}